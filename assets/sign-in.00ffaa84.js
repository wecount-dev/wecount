import{S as oe,i as ae,s as ie,e as u,k as $,q as y,c as x,v as z,a as r,M as h,b as E,l,d as P,r as I,t as W,f as A,g as j,h as K,o as le,X as re,N as fe,n as ee}from"./vendor.c2ebf50b.js";import{s as te}from"./db.f20d6452.js";import{d as ce,e as ge,f as ue,b as pe}from"./icons.79c13611.js";import{B as ne}from"./button.57f2a66c.js";import{E as se}from"./edit-text.1d71b2e5.js";import{u as me}from"./sessionStore.568fac6c.js";function _e(n){let e,t;return{c(){e=u("img"),r(e,"slot","leftElement"),h(e,"margin","0 16px"),z(e.src,t=ce)||r(e,"src",t),r(e,"alt","mail")},m(a,s){E(a,e,s)},p:ee,d(a){a&&j(e)}}}function he(n){let e,t;return{c(){e=u("img"),r(e,"slot","leftElement"),z(e.src,t=ge)||r(e,"src",t),r(e,"alt","mail"),h(e,"margin","0 16px")},m(a,s){E(a,e,s)},p:ee,d(a){a&&j(e)}}}function de(n){let e,t=n[1]("sign_in")+"",a;return{c(){e=u("div"),a=y(t),r(e,"class","text body3"),h(e,"font-weight","500"),h(e,"color","white")},m(s,g){E(s,e,g),l(e,a)},p(s,g){g&2&&t!==(t=s[1]("sign_in")+"")&&I(a,t)},d(s){s&&j(e)}}}function $e(n){let e,t,a,s,g=n[1]("auth.sign-in.sign_in_with_facebook")+"",p;return{c(){e=u("img"),a=$(),s=u("div"),p=y(g),h(e,"margin-right","15px"),z(e.src,t=ue)||r(e,"src",t),r(e,"alt","facebook"),r(s,"class","text body3"),h(s,"font-weight","500"),h(s,"color","white")},m(c,m){E(c,e,m),E(c,a,m),E(c,s,m),l(s,p)},p(c,m){m&2&&g!==(g=c[1]("auth.sign-in.sign_in_with_facebook")+"")&&I(p,g)},d(c){c&&j(e),c&&j(a),c&&j(s)}}}function ve(n){let e,t,a,s,g,p,c=n[1]("login")+"",m,N,d,X,i,L,_,v,q=n[1]("auth.sign-in.do_not_have_account")+"",D,Q,R,C,B=n[1]("auth.sign-in.forgot_your_password")+"",G,T,U,b,V,w,Y,S,F=n[1]("auth.sign-in.look_around")+"",H,k;return d=new se({props:{containerStyle:"width: 80%; margin-bottom: 8px",inputStyle:"font-size: 14px;",type:"email",placeholder:n[1]("auth.sign-in.email_hint"),$$slots:{leftElement:[_e]},$$scope:{ctx:n}}}),d.$on("changed",n[3]),i=new se({props:{containerStyle:"width: 80%;",inputStyle:"font-size: 14px;",type:"password",placeholder:n[1]("auth.sign-in.pw_hint"),$$slots:{leftElement:[he]},$$scope:{ctx:n}}}),i.$on("changed",n[4]),b=new ne({props:{primary:!0,style:"align-self: stretch; margin: 40px 10% 10px 10%",disabled:n[0],loading:n[0],$$slots:{default:[de]},$$scope:{ctx:n}}}),b.$on("click",n[5]),w=new ne({props:{style:n[2],$$slots:{default:[$e]},$$scope:{ctx:n}}}),w.$on("click",n[6]),{c(){e=u("div"),t=u("form"),a=u("img"),g=$(),p=u("h1"),m=y(c),N=$(),x(d.$$.fragment),X=$(),x(i.$$.fragment),L=$(),_=u("div"),v=u("a"),D=y(q),Q=y("?"),R=$(),C=u("a"),G=y(B),T=y("?"),U=$(),x(b.$$.fragment),V=$(),x(w.$$.fragment),Y=$(),S=u("a"),H=y(F),z(a.src,s=pe)||r(a,"src",s),r(a,"alt","logo"),h(p,"margin-bottom","60px"),r(v,"class","link svelte-h3likp"),r(v,"href","/auth/sign-up"),r(C,"class","link svelte-h3likp"),r(C,"href","/auth/find-pw"),r(_,"class","container-options svelte-h3likp"),r(S,"class","link svelte-h3likp"),r(S,"href","/#"),h(S,"margin-top","14px"),h(S,"text-decoration","underline",1),r(t,"class","svelte-h3likp"),r(e,"class","container svelte-h3likp")},m(o,f){E(o,e,f),l(e,t),l(t,a),l(t,g),l(t,p),l(p,m),l(t,N),P(d,t,null),l(t,X),P(i,t,null),l(t,L),l(t,_),l(_,v),l(v,D),l(v,Q),l(_,R),l(_,C),l(C,G),l(C,T),l(t,U),P(b,t,null),l(t,V),P(w,t,null),l(t,Y),l(t,S),l(S,H),k=!0},p(o,[f]){(!k||f&2)&&c!==(c=o[1]("login")+"")&&I(m,c);const J={};f&2&&(J.placeholder=o[1]("auth.sign-in.email_hint")),f&512&&(J.$$scope={dirty:f,ctx:o}),d.$set(J);const O={};f&2&&(O.placeholder=o[1]("auth.sign-in.pw_hint")),f&512&&(O.$$scope={dirty:f,ctx:o}),i.$set(O),(!k||f&2)&&q!==(q=o[1]("auth.sign-in.do_not_have_account")+"")&&I(D,q),(!k||f&2)&&B!==(B=o[1]("auth.sign-in.forgot_your_password")+"")&&I(G,B);const M={};f&1&&(M.disabled=o[0]),f&1&&(M.loading=o[0]),f&514&&(M.$$scope={dirty:f,ctx:o}),b.$set(M);const Z={};f&514&&(Z.$$scope={dirty:f,ctx:o}),w.$set(Z),(!k||f&2)&&F!==(F=o[1]("auth.sign-in.look_around")+"")&&I(H,F)},i(o){k||(W(d.$$.fragment,o),W(i.$$.fragment,o),W(b.$$.fragment,o),W(w.$$.fragment,o),k=!0)},o(o){A(d.$$.fragment,o),A(i.$$.fragment,o),A(b.$$.fragment,o),A(w.$$.fragment,o),k=!1},d(o){o&&j(e),K(d),K(i),K(b),K(w)}}}function be(n,e,t){let a;le(n,re,i=>t(1,a=i)),me.subscribe(i=>{});let s=!1,g,p;const c=`
    align-self: stretch;
    border-radius: 4px;
    background-color: #375A93;
    color: var(--textContrast);
    margin-bottom: 12px;
    margin: 0 10%;

    display:flex;
    flex-direction: row;
    justify-content: center;
    align-items:center;
  `;return fe(async()=>{}),[s,a,c,i=>{g=i.detail},i=>{p=i.detail},async()=>{try{t(0,s=!0);const{error:i}=await te.auth.signIn({email:g,password:p});if(i)throw i}catch(i){console.log(i)}finally{t(0,s=!1)}},async()=>{try{t(0,s=!0);const{user:i,session:L,error:_,url:v}=await te.auth.signIn({provider:"facebook"});//! Caveat: Run below code when supabase does not work as intended.
if(!i&&!_&&!L&&(window.open(v),window.close()),_)throw _}catch(i){console.log(i)}finally{t(0,s=!1)}}]}class Ce extends oe{constructor(e){super();ae(this,e,be,ve,ie,{})}}export{Ce as default};
